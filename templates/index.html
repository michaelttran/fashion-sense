<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fashion Sense â€” Outfit Advisor</title>
  <link rel="stylesheet" href="/static/css/style.css" />
</head>
<body>
  <header>
    <div class="header-inner">
      <div class="logo">
        <span class="logo-icon">âœ¦</span>
        <span class="logo-text">Fashion<strong>Sense</strong></span>
      </div>
      <p class="tagline">Upload your outfit. Get styled.</p>
      <button class="btn-settings" id="settingsBtn" aria-label="API key settings">
        <span class="settings-icon">âš™</span>
        <span class="settings-badge hidden" id="settingsBadge" title="API key saved"></span>
      </button>
    </div>
  </header>

  <!-- API key modal -->
  <div class="modal-overlay hidden" id="modalOverlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Anthropic API Key</h2>
        <button class="modal-close" id="modalClose" aria-label="Close">âœ•</button>
      </div>
      <p class="modal-desc">Your key is stored only in your browser and sent directly to this server for each request. It is never logged or persisted server-side.</p>
      <div class="modal-field">
        <label for="apiKeyInput" class="modal-label">API Key</label>
        <input
          type="password"
          id="apiKeyInput"
          class="modal-input"
          placeholder="sk-ant-..."
          autocomplete="off"
          spellcheck="false"
        />
      </div>
      <div class="modal-actions">
        <button class="btn btn-primary" id="saveKeyBtn">Save Key</button>
        <button class="btn btn-ghost" id="clearKeyBtn">Clear</button>
      </div>
    </div>
  </div>

  <main>
    <!-- Upload section -->
    <section class="upload-section" id="uploadSection">
      <div
        class="drop-zone"
        id="dropZone"
        role="button"
        tabindex="0"
        aria-label="Upload outfit photos"
      >
        <!-- Empty state -->
        <div class="drop-zone-inner" id="dropZoneInner">
          <div class="drop-icon">ðŸ“¸</div>
          <p class="drop-title">Drop your outfit photos here</p>
          <p class="drop-sub">or click to browse &nbsp;Â·&nbsp; select multiple photos</p>
          <span class="drop-formats">JPG Â· PNG Â· WebP Â· GIF Â· HEIC Â· up to 16 MB each</span>
        </div>
        <!-- Compact "add more" state (shown when files are loaded) -->
        <div class="drop-zone-compact hidden" id="dropZoneCompact">
          <span class="drop-compact-icon">+</span>
          <span>Add more photos</span>
        </div>
      </div>

      <!-- Thumbnails strip (shown when files are selected) -->
      <div class="thumbnails-strip hidden" id="thumbnailStrip"></div>

      <input type="file" id="fileInput" accept="image/*,.heic,.heif" multiple hidden />

      <div class="upload-actions" id="uploadActions">
        <button class="btn btn-primary" id="analyzeBtn" disabled>
          <span class="btn-text">Analyze Outfit</span>
          <span class="btn-loader hidden" aria-hidden="true"></span>
        </button>
        <button class="btn btn-ghost" id="clearBtn" disabled>Clear</button>
      </div>
    </section>

    <!-- Error banner -->
    <div class="error-banner hidden" id="errorBanner" role="alert">
      <span id="errorText"></span>
      <button class="error-close" id="errorClose" aria-label="Dismiss">âœ•</button>
    </div>

    <!-- Results section -->
    <section class="results-section hidden" id="resultsSection">
      <!-- Roast section -->
      <div class="roast-section hidden" id="roastSection">
        <div class="roast-persona-picker">
          <span class="roast-persona-label">Pick your critic</span>
          <div class="roast-personas">
            <button class="btn-persona active" data-persona="anna_wintour">Anna Wintour</button>
            <button class="btn-persona" data-persona="trevor_wallace">Trevor Wallace</button>
            <button class="btn-persona" data-persona="chris_rock">Chris Rock</button>
            <button class="btn-persona" data-persona="trevor_noah">Trevor Noah</button>
            <button class="btn-persona" data-persona="james_joyce">James Joyce</button>
          </div>
        </div>
        <button class="btn btn-roast" id="roastBtn">
          <span class="btn-text">Roast My Style ðŸ”¥</span>
          <span class="btn-loader btn-loader-roast hidden" aria-hidden="true"></span>
        </button>
        <div class="roast-card hidden" id="roastCard">
          <span class="roast-label" id="roastLabel">The Verdict</span>
          <p id="roastText"></p>
        </div>
      </div>

      <div class="outfit-summary" id="outfitSummary"></div>
      <h2 class="suggestions-heading">Suggested Pieces</h2>
      <div class="cards-grid" id="cardsGrid"></div>
    </section>
  </main>

  <footer>
    <p>Powered by <a href="https://www.anthropic.com" target="_blank" rel="noopener">Claude AI</a></p>
  </footer>

  <script src="/static/js/app.js"></script>
</body>
</html>
